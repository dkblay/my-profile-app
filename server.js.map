{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"babel-runtime/regenerator\"","webpack:///external \"babel-runtime/helpers/asyncToGenerator\"","webpack:///external \"react\"","webpack:///external \"express\"","webpack:///external \"babel-runtime/core-js/object/get-prototype-of\"","webpack:///external \"babel-runtime/helpers/classCallCheck\"","webpack:///external \"babel-runtime/helpers/createClass\"","webpack:///external \"babel-runtime/helpers/possibleConstructorReturn\"","webpack:///external \"babel-runtime/helpers/inherits\"","webpack:///external \"passport\"","webpack:///external \"babel-runtime/helpers/extends\"","webpack:///external \"babel-runtime/core-js/promise\"","webpack:///external \"react-router-dom\"","webpack:///./src/shared/routes.js","webpack:///external \"isomorphic-fetch\"","webpack:///./src/shared/api.js","webpack:///./src/server/index.js","webpack:///external \"serialize-javascript\"","webpack:///external \"body-parser\"","webpack:///external \"express-session\"","webpack:///external \"react-dom/server\"","webpack:///./src/shared/components/App.js","webpack:///external \"babel-runtime/helpers/objectWithoutProperties\"","webpack:///./src/shared/components/Home.js","webpack:///./src/shared/components/Profile.js","webpack:///./src/shared/utils.js","webpack:///external \"babel-runtime/helpers/slicedToArray\"","webpack:///./src/shared/components/Navbar.js","webpack:///./src/server/config/passport-config.js","webpack:///./src/server/config/facebook.strategy.js","webpack:///external \"passport-facebook\"","webpack:///./src/server/routes/auth-routes.js","webpack:///./src/server/routes/api-routes.js","webpack:///external \"path\""],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","require","_api","routes","path","exact","component","Home","Profile","fetchInitialData","getUserInfo","_callee","_ref","_ref3","_ref4","imageUrl","friendsCount","displayName","token","_regenerator2","default","wrap","_context","prev","next","_promise2","all","getUserImage","getFriendsInfo","sent","_slicedToArray3","abrupt","stop","this","_callee2","response","friends","_context2","_isomorphicFetch2","facebookUrl","json","summary","total_count","t0","console","error","_callee3","image","_context3","data","url","_callee4","feed","_context4","log","resource","arguments","length","undefined","_server","_reactRouterDom","_path","app","_express2","set","use","bodyParser","urlencoded","extended","_expressSession2","secret","_passportConfig2","express","static","join","authRoutes","apiRoutes","_asyncToGenerator3","mark","req","res","activeRoute","context","initialMarkup","initialContent","includes","user","redirect","find","route","matchPath","resolve","renderToString","_react2","createElement","StaticRouter","location","_App2","initialData","_serializeJavascript2","render","_extends3","_x","_x2","_x3","apply","port","process","env","PORT","listen","_react","App","_Navbar2","className","Switch","map","Component","rest","_objectWithoutProperties3","Route","props","window","href","onClick","signIn","_utils","_this2","_classCallCheck3","_this","_possibleConstructorReturn3","__proto__","_getPrototypeOf2","getFeed","feeds","setState","loadingFeed","renderFeed","state","filter","message","_ref2","id","createdDate","created_time","prettyDate","userInfo","staticContext","_state","_state$userInfo","Fragment","src","alt","disabled","tdate","system_date","Date","parse","user_date","diff","Math","floor","round","passport","initialize","session","serializeUser","done","deserializeUser","_facebook2","Facebookstrategy","strategy","Strategy","clientID","clientSecret","callbackURL","passReqToCallback","accessToken","refreshToken","profile","facebook","_x4","_x5","router","Router","authenticate","scope","successRedirect","failureRedirect","getUserFeed"],"mappings":"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","file":"server.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 16);\n","module.exports = require(\"babel-runtime/regenerator\");","module.exports = require(\"babel-runtime/helpers/asyncToGenerator\");","module.exports = require(\"react\");","module.exports = require(\"express\");","module.exports = require(\"babel-runtime/core-js/object/get-prototype-of\");","module.exports = require(\"babel-runtime/helpers/classCallCheck\");","module.exports = require(\"babel-runtime/helpers/createClass\");","module.exports = require(\"babel-runtime/helpers/possibleConstructorReturn\");","module.exports = require(\"babel-runtime/helpers/inherits\");","module.exports = require(\"passport\");","module.exports = require(\"babel-runtime/helpers/extends\");","module.exports = require(\"babel-runtime/core-js/promise\");","module.exports = require(\"react-router-dom\");","import Home from \"./components/Home\";\nimport Profile from \"./components/Profile\";\n\nimport { getUserInfo } from \"./api\";\n\nconst routes = [\n  {\n    path: \"/\",\n    exact: true,\n    component: Home\n  },\n  {\n    path: \"/profile\",\n    component: Profile,\n    fetchInitialData: getUserInfo\n  }\n];\n\nexport default routes;\n","module.exports = require(\"isomorphic-fetch\");","import fetch from \"isomorphic-fetch\";\n\nconst facebookUrl = (token, resource, params = \"\") =>\n  `https://graph.facebook.com/v3.2/me/${resource}?access_token=${token}&type=large&format=json&method=get&pretty=0&redirect=false${params}`;\n\nexport async function getUserInfo({ displayName, token }) {\n  const [imageUrl, friendsCount] = await Promise.all([\n    getUserImage(token),\n    getFriendsInfo(token)\n  ]);\n\n  return {\n    imageUrl,\n    friendsCount,\n    displayName\n  };\n}\n\nasync function getFriendsInfo(token) {\n  try {\n    const response = await fetch(facebookUrl(token, \"friends\"));\n    const friends = await response.json();\n    return friends.summary && friends.summary.total_count;\n  } catch (e) {\n    console.error(e);\n  }\n}\n\nasync function getUserImage(token) {\n  try {\n    const response = await fetch(facebookUrl(token, \"picture\", \"&type=large\"));\n    const image = await response.json();\n    return image.data && image.data.url;\n  } catch (e) {\n    console.error(e);\n  }\n}\n\nexport async function getUserFeed(token) {\n  const response = await fetch(facebookUrl(token, \"feed\"));\n  const feed = await response.json();\n  console.log(feed);\n  return feed.data;\n}\n","import express from \"express\";\nimport serialize from \"serialize-javascript\";\nimport bodyParser from \"body-parser\";\nimport session from \"express-session\";\nimport React from \"react\";\nimport { renderToString } from \"react-dom/server\";\nimport { StaticRouter, matchPath } from \"react-router-dom\";\nimport App from \"../shared/components/App\";\nimport routes from \"../shared/routes\";\nimport passportConfig from \"./config/passport-config\";\nimport authRoutes from \"./routes/auth-routes\";\nimport apiRoutes from \"./routes/api-routes\";\nimport { join } from \"path\";\n\nconst app = express();\napp.set(\"view engine\", \"ejs\");\napp.use(bodyParser.json());\napp.use(bodyParser.urlencoded({ extended: false }));\napp.use(session({ secret: \"anything\" }));\n\npassportConfig(app);\n\napp.use(express.static(\"public\"));\napp.use(express.static(join(\"node_modules/bootstrap/dist\")));\n\napp.use(\"/auth\", authRoutes);\napp.use(\"/api\", apiRoutes);\n\napp.get([\"/\", \"/profile\"], async (req, res, next) => {\n  if (req.url.includes(\"profile\") && !req.user) {\n    return res.redirect(\"/\");\n  }\n  const activeRoute = routes.find(route => matchPath(req.url, route)) || {};\n  const fetchInitialData = activeRoute.fetchInitialData\n    ? activeRoute.fetchInitialData(req.user)\n    : Promise.resolve({});\n\n  const context = await fetchInitialData;\n\n  const initialMarkup = renderToString(\n    <StaticRouter location={req.url} context={context}>\n      <App />\n    </StaticRouter>\n  );\n\n  const initialContent = { initialData: serialize(context), initialMarkup };\n  res.render(\"index\", { ...initialContent });\n});\n\nconst port = process.env.PORT || 3000;\n\napp.listen(port, \"0.0.0.0\", () =>\n  console.log(`Server is running on port: ${port}`)\n);\n","module.exports = require(\"serialize-javascript\");","module.exports = require(\"body-parser\");","module.exports = require(\"express-session\");","module.exports = require(\"react-dom/server\");","import React, { Component } from \"react\";\nimport { Route, Switch } from \"react-router-dom\";\nimport routes from \"../routes\";\nimport NavBar from \"./Navbar\";\n\nclass App extends Component {\n  render() {\n    return (\n      <div>\n        <NavBar />\n        <div className=\"container\">\n          <Switch>\n            {routes.map(({ path, exact, component: Component, ...rest }) => (\n              <Route\n                key={path}\n                path={path}\n                exact={exact}\n                render={props => <Component {...props} {...rest} />}\n              />\n            ))}\n          </Switch>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","module.exports = require(\"babel-runtime/helpers/objectWithoutProperties\");","import React, { Component } from \"react\";\n\nclass Home extends Component {\n  signIn() {\n    window.location.href = \"http://localhost:3000/auth/facebook\";\n  }\n\n  render() {\n    return (\n      <div>\n        <div className=\"jumbotron mt-3\">\n          <h1>Welcome to Social Media App</h1>\n          <p className=\"lead\">Sign In with Facebook</p>\n          <button className=\"btn btn-lg btn-primary\" onClick={this.signIn}>\n            Sign In Â»\n          </button>\n        </div>\n      </div>\n    );\n  }\n}\nexport default Home;\n","import React, { Component } from \"react\";\nimport fetch from \"isomorphic-fetch\";\nimport { prettyDate } from \"../utils\";\nclass Profile extends Component {\n  constructor(props) {\n    super(props);\n\n    let userInfo = null;\n    if (__isBrowser__) {\n      userInfo = window.initialData;\n    } else {\n      userInfo = this.props.staticContext;\n    }\n\n    this.state = {\n      userInfo: userInfo,\n      feeds: [],\n      loadingFeed: false\n    };\n  }\n  getFeed = async () => {\n    this.setState({ loadingFeed: true });\n    const feeds = await (await fetch(\"/api/feed\")).json();\n    this.setState({ feeds });\n  };\n\n  renderFeed = () => {\n    const { feeds } = this.state;\n    return feeds\n      .filter(feed => feed.message)\n      .map(({ message, id, created_time: createdDate }) => (\n        <div className=\"text-muted pt-3\" key={id}>\n          <div className=\"pb-3 mb-0 small lh-125 border-bottom border-gray\">\n            <div className=\"d-flex justify-content-between align-items-center w-100\">\n              <strong className=\"text-gray-dark\">{message}</strong>\n            </div>\n            <span className=\"d-block\">@ {prettyDate(createdDate)}</span>\n          </div>\n        </div>\n      ));\n  };\n\n  render() {\n    const {\n      userInfo: { friendsCount, displayName, imageUrl },\n      feeds,\n      loadingFeed\n    } = this.state;\n    return (\n      <React.Fragment>\n        <div className=\"profile__head\">\n          <img className=\"profile__image\" src={imageUrl} alt=\"profile\" />\n          <div className=\"profile__info\">\n            <h1 className=\"cover-heading\">{displayName}</h1>\n            <p className=\"lead\">\n              Your Total Number of Friends on Facebook is : {friendsCount}\n            </p>\n            <button\n              disabled={loadingFeed}\n              className=\"btn btn-lg btn-secondary btn__view\"\n              onClick={this.getFeed}\n            >\n              View Posts\n            </button>\n          </div>\n        </div>\n        <div className=\"profile__feeds\">\n          {!!feeds.length && this.renderFeed()}\n        </div>\n      </React.Fragment>\n    );\n  }\n}\nexport default Profile;\n","// https://stackoverflow.com/questions/6549223/javascript-code-to-display-twitter-created-at-as-xxxx-ago\nexport function prettyDate(tdate) {\n  var system_date = new Date(Date.parse(tdate));\n  var user_date = new Date();\n  var diff = Math.floor((user_date - system_date) / 1000);\n  if (diff <= 1) {\n    return \"just now\";\n  }\n  if (diff < 20) {\n    return diff + \" seconds ago\";\n  }\n  if (diff < 40) {\n    return \"half a minute ago\";\n  }\n  if (diff < 60) {\n    return \"less than a minute ago\";\n  }\n  if (diff <= 90) {\n    return \"one minute ago\";\n  }\n  if (diff <= 3540) {\n    return Math.round(diff / 60) + \" minutes ago\";\n  }\n  if (diff <= 5400) {\n    return \"1 hour ago\";\n  }\n  if (diff <= 86400) {\n    return Math.round(diff / 3600) + \" hours ago\";\n  }\n  if (diff <= 129600) {\n    return \"1 day ago\";\n  }\n  if (diff < 604800) {\n    return Math.round(diff / 86400) + \" days ago\";\n  }\n  if (diff <= 777600) {\n    return \"1 week ago\";\n  }\n  return \"on \" + system_date;\n}\n","module.exports = require(\"babel-runtime/helpers/slicedToArray\");","import React from \"react\";\n\nconst NavBar = () => (\n  <nav className=\"navbar navbar-dark bg-primary\">\n    <a className=\"navbar-brand\" href=\"/\">\n      Social App\n    </a>\n  </nav>\n);\n\nexport default NavBar;\n","import passport from \"passport\";\nimport facebookStrategy from \"./facebook.strategy\";\n\nexport default app => {\n  app.use(passport.initialize());\n  app.use(passport.session());\n\n  passport.serializeUser(function(user, done) {\n    done(null, user);\n  });\n\n  passport.deserializeUser(function(user, done) {\n    done(null, user);\n  });\n\n  facebookStrategy();\n};\n","import passport from \"passport\";\nimport strategy from \"passport-facebook\";\n\nconst Facebookstrategy = strategy.Strategy;\n\nexport default () => {\n  passport.use(\n    new Facebookstrategy(\n      {\n        clientID: \"1438421969807164\",\n        clientSecret: \"63b04c2fc7eeca2241070aa3428aa96f\",\n        callbackURL: \"http://localhost:3000/auth/facebook/callback\",\n        passReqToCallback: true\n      },\n      async (req, accessToken, refreshToken, profile, done) => {\n        const user = {};\n\n        user.displayName = profile.displayName;\n        user.facebook = {};\n        user.token = accessToken;\n\n        done(null, user);\n      }\n    )\n  );\n};\n","module.exports = require(\"passport-facebook\");","import express from \"express\";\nimport passport from \"passport\";\n\nconst router = express.Router();\n\nrouter.route(\"/facebook\").get(\n  passport.authenticate(\"facebook\", {\n    scope: [\"email\", \"user_posts\", \"user_photos\", \"user_friends\"]\n  })\n);\nrouter.route(\"/facebook/callback\").get(\n  passport.authenticate(\"facebook\", {\n    successRedirect: \"/profile\",\n    failureRedirect: \"/error\"\n  })\n);\nexport default router;\n","import express from \"express\";\nimport { getUserFeed } from \"../../shared/api\";\nconst router = express.Router();\n\nrouter.route(\"/feed\").get(async (req, res) => {\n  const feed = await getUserFeed(req.user.token);\n  return res.json(feed);\n});\n\nexport default router;\n","module.exports = require(\"path\");"],"sourceRoot":""}