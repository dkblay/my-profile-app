!function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r(r.s=16)}([function(e,t){e.exports=require("babel-runtime/regenerator")},function(e,t){e.exports=require("babel-runtime/helpers/asyncToGenerator")},function(e,t){e.exports=require("react")},function(e,t){e.exports=require("express")},function(e,t){e.exports=require("babel-runtime/core-js/object/get-prototype-of")},function(e,t){e.exports=require("babel-runtime/helpers/classCallCheck")},function(e,t){e.exports=require("babel-runtime/helpers/createClass")},function(e,t){e.exports=require("babel-runtime/helpers/possibleConstructorReturn")},function(e,t){e.exports=require("babel-runtime/helpers/inherits")},function(e,t){e.exports=require("passport")},function(e,t){e.exports=require("babel-runtime/helpers/extends")},function(e,t){e.exports=require("babel-runtime/core-js/promise")},function(e,t){e.exports=require("react-router-dom")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(r(23)),a=o(r(24)),u=r(15);function o(e){return e&&e.__esModule?e:{default:e}}var l=[{path:"/",exact:!0,component:n.default},{path:"/profile",component:a.default,fetchInitialData:u.getUserInfo}];t.default=l},function(e,t){e.exports=require("isomorphic-fetch")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUserFeed=t.getUserInfo=void 0;var n,a,u,o,l=m(r(0)),s=m(r(11)),i=m(r(26)),c=m(r(1)),f=(t.getUserInfo=(n=(0,c.default)(l.default.mark(function e(t){var r,n,a,u,o=t.displayName,c=t.token;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.default.all([d(c),f(c)]);case 2:return r=e.sent,n=(0,i.default)(r,2),a=n[0],u=n[1],e.abrupt("return",{imageUrl:a,friendsCount:u,displayName:o});case 7:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)}),a=(0,c.default)(l.default.mark(function e(t){var r,n;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,p.default)(v(t,"friends"));case 3:return r=e.sent,e.next=6,r.json();case 6:return n=e.sent,e.abrupt("return",n.summary&&n.summary.total_count);case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}},e,this,[[0,10]])})),function(e){return a.apply(this,arguments)}),d=(u=(0,c.default)(l.default.mark(function e(t){var r,n;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,p.default)(v(t,"picture","&type=large"));case 3:return r=e.sent,e.next=6,r.json();case 6:return n=e.sent,e.abrupt("return",n.data&&n.data.url);case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}},e,this,[[0,10]])})),function(e){return u.apply(this,arguments)}),p=(t.getUserFeed=(o=(0,c.default)(l.default.mark(function e(t){var r,n;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.default)(v(t,"feed"));case 2:return r=e.sent,e.next=5,r.json();case 5:return n=e.sent,console.log(n),e.abrupt("return",n.data);case 8:case"end":return e.stop()}},e,this)})),function(e){return o.apply(this,arguments)}),m(r(14)));function m(e){return e&&e.__esModule?e:{default:e}}var v=function(e,t){return"https://graph.facebook.com/v3.2/me/"+t+"?access_token="+e+"&type=large&format=json&method=get&pretty=0&redirect=false"+(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"")}},function(e,t,r){"use strict";var n=y(r(0)),a=y(r(10)),u=y(r(11)),o=y(r(1)),l=y(r(3)),s=y(r(17)),i=y(r(18)),c=y(r(19)),f=y(r(2)),d=r(20),p=r(12),m=y(r(21)),v=y(r(13)),b=y(r(28)),h=y(r(31)),_=y(r(32)),g=r(33);function y(e){return e&&e.__esModule?e:{default:e}}var x,k=(0,l.default)();k.set("view engine","ejs"),k.use(i.default.json()),k.use(i.default.urlencoded({extended:!1})),k.use((0,c.default)({secret:"anything"})),(0,b.default)(k),k.use(l.default.static("public")),k.use(l.default.static((0,g.join)("node_modules/bootstrap/dist"))),k.use("/auth",h.default),k.use("/api",_.default),k.get(["/","/profile"],(x=(0,o.default)(n.default.mark(function e(t,r,o){var l,i,c,b,h;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.url.includes("profile")||t.user){e.next=2;break}return e.abrupt("return",r.redirect("/"));case 2:return l=v.default.find(function(e){return(0,p.matchPath)(t.url,e)})||{},i=l.fetchInitialData?l.fetchInitialData(t.user):u.default.resolve({}),e.next=6,i;case 6:c=e.sent,b=(0,d.renderToString)(f.default.createElement(p.StaticRouter,{location:t.url,context:c},f.default.createElement(m.default,null))),h={initialData:(0,s.default)(c),initialMarkup:b},r.render("index",(0,a.default)({},h));case 10:case"end":return e.stop()}},e,void 0)})),function(e,t,r){return x.apply(this,arguments)}));var j=process.env.PORT||3e3;k.listen(j,"0.0.0.0",function(){return console.log("Server is running on port: "+j)})},function(e,t){e.exports=require("serialize-javascript")},function(e,t){e.exports=require("body-parser")},function(e,t){e.exports=require("express-session")},function(e,t){e.exports=require("react-dom/server")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=v(r(10)),a=v(r(22)),u=v(r(4)),o=v(r(5)),l=v(r(6)),s=v(r(7)),i=v(r(8)),c=r(2),f=v(c),d=r(12),p=v(r(13)),m=v(r(27));function v(e){return e&&e.__esModule?e:{default:e}}var b=function(e){function t(){return(0,o.default)(this,t),(0,s.default)(this,(t.__proto__||(0,u.default)(t)).apply(this,arguments))}return(0,i.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){return f.default.createElement("div",null,f.default.createElement(m.default,null),f.default.createElement("div",{className:"container"},f.default.createElement(d.Switch,null,p.default.map(function(e){var t=e.path,r=e.exact,u=e.component,o=(0,a.default)(e,["path","exact","component"]);return f.default.createElement(d.Route,{key:t,path:t,exact:r,render:function(e){return f.default.createElement(u,(0,n.default)({},e,o))}})}))))}}]),t}(c.Component);t.default=b},function(e,t){e.exports=require("babel-runtime/helpers/objectWithoutProperties")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=c(r(4)),a=c(r(5)),u=c(r(6)),o=c(r(7)),l=c(r(8)),s=r(2),i=c(s);function c(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(){return(0,a.default)(this,t),(0,o.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,l.default)(t,e),(0,u.default)(t,[{key:"signIn",value:function(){window.location.href="http://localhost:3000/auth/facebook"}},{key:"render",value:function(){return i.default.createElement("div",null,i.default.createElement("div",{className:"jumbotron mt-3"},i.default.createElement("h1",null,"Welcome to Social Media App"),i.default.createElement("p",{className:"lead"},"Sign In with Facebook"),i.default.createElement("button",{className:"btn btn-lg btn-primary",onClick:this.signIn},"Sign In Â»")))}}]),t}(s.Component);t.default=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=m(r(0)),a=m(r(1)),u=m(r(4)),o=m(r(5)),l=m(r(6)),s=m(r(7)),i=m(r(8)),c=r(2),f=m(c),d=m(r(14)),p=r(25);function m(e){return e&&e.__esModule?e:{default:e}}var v=function(e){function t(e){var r=this;(0,o.default)(this,t);var l=(0,s.default)(this,(t.__proto__||(0,u.default)(t)).call(this,e));l.getFeed=(0,a.default)(n.default.mark(function e(){var t;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.setState({loadingFeed:!0}),e.next=3,(0,d.default)("/api/feed");case 3:return e.next=5,e.sent.json();case 5:t=e.sent,l.setState({feeds:t});case 7:case"end":return e.stop()}},e,r)})),l.renderFeed=function(){return l.state.feeds.filter(function(e){return e.message}).map(function(e){var t=e.message,r=e.id,n=e.created_time;return f.default.createElement("div",{className:"text-muted pt-3",key:r},f.default.createElement("div",{className:"pb-3 mb-0 small lh-125 border-bottom border-gray"},f.default.createElement("div",{className:"d-flex justify-content-between align-items-center w-100"},f.default.createElement("strong",{className:"text-gray-dark"},t)),f.default.createElement("span",{className:"d-block"},"@ ",(0,p.prettyDate)(n))))})};var i=null;return i=l.props.staticContext,l.state={userInfo:i,feeds:[],loadingFeed:!1},l}return(0,i.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.state,t=e.userInfo,r=t.friendsCount,n=t.displayName,a=t.imageUrl,u=e.feeds,o=e.loadingFeed;return f.default.createElement(f.default.Fragment,null,f.default.createElement("div",{className:"profile__head"},f.default.createElement("img",{className:"profile__image",src:a,alt:"profile"}),f.default.createElement("div",{className:"profile__info"},f.default.createElement("h1",{className:"cover-heading"},n),f.default.createElement("p",{className:"lead"},"Your Total Number of Friends on Facebook is : ",r),f.default.createElement("button",{disabled:o,className:"btn btn-lg btn-secondary btn__view",onClick:this.getFeed},"View Posts"))),f.default.createElement("div",{className:"profile__feeds"},!!u.length&&this.renderFeed()))}}]),t}(c.Component);t.default=v},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.prettyDate=function(e){var t=new Date(Date.parse(e)),r=new Date,n=Math.floor((r-t)/1e3);if(n<=1)return"just now";if(n<20)return n+" seconds ago";if(n<40)return"half a minute ago";if(n<60)return"less than a minute ago";if(n<=90)return"one minute ago";if(n<=3540)return Math.round(n/60)+" minutes ago";if(n<=5400)return"1 hour ago";if(n<=86400)return Math.round(n/3600)+" hours ago";if(n<=129600)return"1 day ago";if(n<604800)return Math.round(n/86400)+" days ago";if(n<=777600)return"1 week ago";return"on "+t}},function(e,t){e.exports=require("babel-runtime/helpers/slicedToArray")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a=r(2),u=(n=a)&&n.__esModule?n:{default:n};t.default=function(){return u.default.createElement("nav",{className:"navbar navbar-dark bg-primary"},u.default.createElement("a",{className:"navbar-brand",href:"/"},"Social App"))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=u(r(9)),a=u(r(29));function u(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){e.use(n.default.initialize()),e.use(n.default.session()),n.default.serializeUser(function(e,t){t(null,e)}),n.default.deserializeUser(function(e,t){t(null,e)}),(0,a.default)()}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(r(0)),a=o(r(1)),u=o(r(9));function o(e){return e&&e.__esModule?e:{default:e}}var l=o(r(30)).default.Strategy;t.default=function(){var e;u.default.use(new l({clientID:"1438421969807164",clientSecret:"63b04c2fc7eeca2241070aa3428aa96f",callbackURL:"http://localhost:3000/auth/facebook/callback",passReqToCallback:!0},(e=(0,a.default)(n.default.mark(function e(t,r,a,u,o){var l;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(l={}).displayName=u.displayName,l.facebook={},l.token=r,o(null,l);case 5:case"end":return e.stop()}},e,void 0)})),function(t,r,n,a,u){return e.apply(this,arguments)})))}},function(e,t){e.exports=require("passport-facebook")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=u(r(3)),a=u(r(9));function u(e){return e&&e.__esModule?e:{default:e}}var o=n.default.Router();o.route("/facebook").get(a.default.authenticate("facebook",{scope:["email","user_posts","user_photos","user_friends"]})),o.route("/facebook/callback").get(a.default.authenticate("facebook",{successRedirect:"/profile",failureRedirect:"/error"})),t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=l(r(0)),a=l(r(1)),u=l(r(3)),o=r(15);function l(e){return e&&e.__esModule?e:{default:e}}var s,i=u.default.Router();i.route("/feed").get((s=(0,a.default)(n.default.mark(function e(t,r){var a;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,o.getUserFeed)(t.user.token);case 2:return a=e.sent,e.abrupt("return",r.json(a));case 4:case"end":return e.stop()}},e,void 0)})),function(e,t){return s.apply(this,arguments)})),t.default=i},function(e,t){e.exports=require("path")}]);
//# sourceMappingURL=server.js.map